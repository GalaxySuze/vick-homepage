!function(a){a.fn.poptrox_disableSelection=function(){return a(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")},a.fn.poptrox=function(J){function Q(){K=a(window).width(),N=a(window).height()+M.windowHeightPad;var f=Math.abs(X.width()-X.outerWidth()),g=Math.abs(X.height()-X.outerHeight()),b=(W.width(),W.height(),K-2*M.windowMargin-f),d=N-2*M.windowMargin-g;X.css("min-width",M.popupWidth).css("min-height",M.popupHeight),V.children().css("max-width",b).css("max-height",d)}if(0==this.length){return a(this)}if(this.length>1){for(var E=0;E<this.length;E++){a(this[E]).poptrox(J)}return a(this)}var K,N,M=a.extend({preload:!1,baseZIndex:1000,fadeSpeed:300,overlayColor:"#000000",overlayOpacity:0.6,overlayClass:"poptrox-overlay",windowMargin:50,windowHeightPad:0,selector:"a",caption:null,parent:"body",popupSpeed:300,popupWidth:200,popupHeight:100,popupIsFixed:!1,useBodyOverflow:!1,usePopupEasyClose:!0,usePopupForceClose:!1,usePopupLoader:!0,usePopupCloser:!0,usePopupCaption:!1,usePopupNav:!1,usePopupDefaultStyling:!0,popupBackgroundColor:"#FFFFFF",popupTextColor:"#000000",popupLoaderTextSize:"2em",popupCloserBackgroundColor:"#000000",popupCloserTextColor:"#FFFFFF",popupCloserTextSize:"20px",popupPadding:10,popupCaptionHeight:60,popupCaptionTextSize:null,popupBlankCaptionText:"(untitled)",popupCloserText:"&#215;",popupLoaderText:"&bull;&bull;&bull;&bull;",popupClass:"poptrox-popup",popupSelector:null,popupLoaderSelector:".loader",popupCloserSelector:".closer",popupCaptionSelector:".caption",popupNavPreviousSelector:".nav-previous",popupNavNextSelector:".nav-next",onPopupClose:null,onPopupOpen:null},J),I=a(this),e=a("body"),G=a('<div class="'+M.overlayClass+'"></div>'),U=a(window),z=[],D=0,B=!1,A=new Array;M.usePopupLoader||(M.popupLoaderSelector=null),M.usePopupCloser||(M.popupCloserSelector=null),M.usePopupCaption||(M.popupCaptionSelector=null),M.usePopupNav||(M.popupNavPreviousSelector=null,M.popupNavNextSelector=null);var X;X=a(M.popupSelector?M.popupSelector:'<div class="'+M.popupClass+'">'+(M.popupLoaderSelector?'<div class="loader">'+M.popupLoaderText+"</div>":"")+'<div class="pic"></div>'+(M.popupCaptionSelector?'<div class="caption"></div>':"")+(M.popupCloserSelector?'<span class="closer">'+M.popupCloserText+"</span>":"")+(M.popupNavPreviousSelector?'<div class="nav-previous"></div>':"")+(M.popupNavNextSelector?'<div class="nav-next"></div>':"")+"</div>");var V=X.find(".pic"),W=a(),j=X.find(M.popupLoaderSelector),H=X.find(M.popupCaptionSelector),Y=X.find(M.popupCloserSelector),O=X.find(M.popupNavNextSelector),q=X.find(M.popupNavPreviousSelector),L=O.add(q);if(M.usePopupDefaultStyling&&(X.css("background",M.popupBackgroundColor).css("color",M.popupTextColor).css("padding",M.popupPadding+"px"),H.length>0&&(X.css("padding-bottom",M.popupCaptionHeight+"px"),H.css("position","absolute").css("left","0").css("bottom","0").css("width","100%").css("text-align","center").css("height",M.popupCaptionHeight+"px").css("line-height",M.popupCaptionHeight+"px"),M.popupCaptionTextSize&&H.css("font-size",popupCaptionTextSize)),Y.length>0&&Y.html(M.popupCloserText).css("font-size",M.popupCloserTextSize).css("background",M.popupCloserBackgroundColor).css("color",M.popupCloserTextColor).css("display","block").css("width","40px").css("height","40px").css("line-height","40px").css("text-align","center").css("position","absolute").css("text-decoration","none").css("outline","0").css("top","0").css("right","-40px"),j.length>0&&j.html("").css("position","relative").css("font-size",M.popupLoaderTextSize).on("startSpinning",function(b){var d=a("<div>"+M.popupLoaderText+"</div>");d.css("height",Math.floor(M.popupHeight/2)+"px").css("overflow","hidden").css("line-height",Math.floor(M.popupHeight/2)+"px").css("text-align","center").css("margin-top",Math.floor((X.height()-d.height()+(H.length>0?H.height():0))/2)).css("color",M.popupTextColor?M.popupTextColor:"").on("xfin",function(){d.fadeTo(300,0.5,function(){d.trigger("xfout")})}).on("xfout",function(){d.fadeTo(300,0.05,function(){d.trigger("xfin")})}).trigger("xfin"),j.append(d)}).on("stopSpinning",function(b){var d=j.find("div");d.remove()}),2==L.length)){L.css("font-size","75px").css("text-align","center").css("color","#fff").css("text-shadow","none").css("height","100%").css("position","absolute").css("top","0").css("opacity","0.35").css("cursor","pointer").css("box-shadow","inset 0px 0px 10px 0px rgba(0,0,0,0)").poptrox_disableSelection();var F,R;M.usePopupEasyClose?(F="100px",R="100px"):(F="75%",R="25%"),O.css("right","0").css("width",F).html('<div style="position: absolute; height: 100px; width: 125px; top: 50%; right: 0; margin-top: -50px;">&gt;</div>'),q.css("left","0").css("width",R).html('<div style="position: absolute; height: 100px; width: 125px; top: 50%; left: 0; margin-top: -50px;">&lt;</div>')}return U.on("resize orientationchange",function(){Q()}),H.on("update",function(b,d){d&&0!=d.length||(d=M.popupBlankCaptionText),H.html(d)}),Y.css("cursor","pointer").on("click",function(b){return b.preventDefault(),b.stopPropagation(),X.trigger("poptrox_close"),!0}),O.on("click",function(b){b.stopPropagation(),b.preventDefault(),X.trigger("poptrox_next")}),q.on("click",function(b){b.stopPropagation(),b.preventDefault(),X.trigger("poptrox_previous")}),G.css("position","fixed").css("left",0).css("top",0).css("z-index",M.baseZIndex).css("width","100%").css("height","100%").css("text-align","center").css("cursor","pointer").appendTo(M.parent).prepend('<div style="display:inline-block;height:100%;vertical-align:middle;"></div>').append('<div style="position:absolute;left:0;top:0;width:100%;height:100%;background:'+M.overlayColor+";opacity:"+M.overlayOpacity+";filter:alpha(opacity="+100*M.overlayOpacity+');"></div>').hide().on("touchmove",function(b){return !1}).on("click",function(b){b.preventDefault(),b.stopPropagation(),X.trigger("poptrox_close")}),X.css("display","inline-block").css("vertical-align","middle").css("position","relative").css("z-index",1).css("cursor","auto").appendTo(G).hide().on("poptrox_next",function(){var b=D+1;b>=z.length&&(b=0),X.trigger("poptrox_switch",[b])}).on("poptrox_previous",function(){var b=D-1;0>b&&(b=z.length-1),X.trigger("poptrox_switch",[b])}).on("poptrox_reset",function(){Q(),X.data("width",M.popupWidth).data("height",M.popupHeight),j.hide().trigger("stopSpinning"),H.hide(),Y.hide(),L.hide(),V.hide(),W.attr("src","").detach()}).on("poptrox_open",function(b,d){return B?!0:(B=!0,M.useBodyOverflow&&e.css("overflow","hidden"),M.onPopupOpen&&M.onPopupOpen(),void G.fadeTo(M.fadeSpeed,1,function(){X.trigger("poptrox_switch",[d,!0])}))}).on("poptrox_switch",function(g,d,h){var k;if(!h&&B){return !0}if(B=!0,X.css("width",X.data("width")).css("height",X.data("height")),H.hide(),W.attr("src")&&W.attr("src",""),W.detach(),k=z[d],W=k.object,W.off("load"),V.css("text-indent","-9999px").show().append(W),"ajax"==k.type?a.get(k.src,function(i){W.html(i),W.trigger("load")}):W.attr("src",k.src),"image"!=k.type){var f,b;f=k.width,b=k.height,"%"==f.slice(-1)&&(f=parseInt(f.substring(0,f.length-1))/100*U.width()),"%"==b.slice(-1)&&(b=parseInt(b.substring(0,b.length-1))/100*U.height()),W.css("position","relative").css("outline","0").css("z-index",M.baseZIndex+100).width(f).height(b)}j.trigger("startSpinning").fadeIn(300),X.show(),M.popupIsFixed?(X.width(M.popupWidth).height(M.popupHeight),W.load(function(){W.off("load"),j.hide().trigger("stopSpinning"),H.trigger("update",[k.captionText]).fadeIn(M.fadeSpeed),Y.fadeIn(M.fadeSpeed),V.css("text-indent",0).hide().fadeIn(M.fadeSpeed,function(){B=!1}),D=d,L.fadeIn(M.fadeSpeed)})):W.load(function(){Q(),W.off("load"),j.hide().trigger("stopSpinning");var i=W.width(),l=W.height(),m=function(){H.trigger("update",[k.captionText]).fadeIn(M.fadeSpeed),Y.fadeIn(M.fadeSpeed),V.css("text-indent",0).hide().fadeIn(M.fadeSpeed,function(){B=!1}),D=d,L.fadeIn(M.fadeSpeed),X.data("width",i).data("height",l).css("width","auto").css("height","auto")};i==X.data("width")&&l==X.data("height")?m():X.animate({width:i,height:l},M.popupSpeed,"swing",m)}),"image"!=k.type&&W.trigger("load")}).on("poptrox_close",function(){return B&&!M.usePopupForceClose?!0:(B=!0,X.hide().trigger("poptrox_reset"),M.onPopupClose&&M.onPopupClose(),void G.fadeOut(M.fadeSpeed,function(){M.useBodyOverflow&&e.css("overflow","auto"),B=!1}))}).trigger("poptrox_reset"),M.usePopupEasyClose?(H.on("click","a",function(b){b.stopPropagation()}),X.css("cursor","pointer").on("click",function(b){b.stopPropagation(),b.preventDefault(),X.trigger("poptrox_close")})):X.on("click",function(b){b.stopPropagation()}),U.keydown(function(b){if(X.is(":visible")){switch(b.keyCode){case 37:case 32:if(M.usePopupNav){return X.trigger("poptrox_previous"),!1}break;case 39:if(M.usePopupNav){return X.trigger("poptrox_next"),!1}break;case 27:return X.trigger("poptrox_close"),!1}}}),I.find(M.selector).each(function(h){var r,d,k=a(this),m=k.find("img"),g=k.data("poptrox");if("ignore"!=g&&k.attr("href")){if(r={src:k.attr("href"),captionText:m.attr("title"),width:null,height:null,type:null,object:null,options:null},M.caption){if("function"==typeof M.caption){c=M.caption(k)}else{if("selector" in M.caption){var b;b=k.find(M.caption.selector),"attribute" in M.caption?c=b.attr(M.caption.attribute):(c=b.html(),M.caption.remove===!0&&b.remove())}}}else{c=m.attr("title")}if(r.captionText=c,g){var f=g.split(",");0 in f&&(r.type=f[0]),1 in f&&(d=f[1].match(/([0-9%]+)x([0-9%]+)/),d&&3==d.length&&(r.width=d[1],r.height=d[2])),2 in f&&(r.options=f[2])}if(!r.type){switch(d=r.src.match(/\/\/([a-z0-9\.]+)\/.*/),(!d||d.length<2)&&(d=[!1]),d[1]){case"api.soundcloud.com":r.type="soundcloud";break;case"youtu.be":r.type="youtube";break;case"vimeo.com":r.type="vimeo";break;case"wistia.net":r.type="wistia";break;case"bcove.me":r.type="bcove";break;default:r.type="image"}}switch(d=r.src.match(/\/\/[a-z0-9\.]+\/(.*)/),r.type){case"iframe":r.object=a('<iframe src="" frameborder="0"></iframe>'),r.object.on("click",function(i){i.stopPropagation()}).css("cursor","auto"),r.width&&r.height||(r.width="600",r.height="400");break;case"ajax":r.object=a('<div class="poptrox-ajax"></div>'),r.object.on("click",function(i){i.stopPropagation()}).css("cursor","auto").css("overflow","auto"),r.width&&r.height||(r.width="600",r.height="400");break;case"soundcloud":r.object=a('<iframe scrolling="no" frameborder="no" src=""></iframe>'),r.src="//w.soundcloud.com/player/?url="+escape(r.src)+(r.options?"&"+r.options:""),r.width="600",r.height="166";break;case"youtube":r.object=a('<iframe src="" frameborder="0" allowfullscreen="1"></iframe>'),r.src="//www.youtube.com/embed/"+d[1]+(r.options?"?"+r.options:""),r.width&&r.height||(r.width="800",r.height="480");break;case"vimeo":r.object=a('<iframe src="" frameborder="0" allowFullScreen="1"></iframe>'),r.src="//player.vimeo.com/video/"+d[1]+(r.options?"?"+r.options:""),r.width&&r.height||(r.width="800",r.height="480");break;case"wistia":r.object=a('<iframe src="" frameborder="0" allowFullScreen="1"></iframe>'),r.src="//fast.wistia.net/"+d[1]+(r.options?"?"+r.options:""),r.width&&r.height||(r.width="800",r.height="480");break;case"bcove":r.object=a('<iframe src="" frameborder="0" allowFullScreen="1" width="100%"></iframe>'),r.src="//bcove.me/"+d[1]+(r.options?"?"+r.options:""),r.width&&r.height||(r.width="640",r.height="360");break;default:if(r.object=a('<img src="" alt="" style="vertical-align:bottom" />'),M.preload){var d=document.createElement("img");d.src=r.src,A.push(d)}r.width=k.attr("width"),r.height=k.attr("height")}"file:"==window.location.protocol&&r.src.match(/^\/\//)&&(r.src="http:"+r.src),z.push(r),m.attr("title",""),k.attr("href","").css("outline",0).on("click",function(i){i.preventDefault(),i.stopPropagation(),X.trigger("poptrox_open",[h])})}}),a(this)}}(jQuery);$(document).on("ready",function(){var a=$(".pop_link");a.poptrox({usePopupCaption:true})});